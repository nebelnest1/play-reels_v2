<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>(1) Private Video Request</title>
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="%23ff0000"/><path d="M35 30 L75 50 L35 70 Z" fill="%23ffffff"/></svg>'>

  <script>
    var APP_CONFIG = {
      domain: "https://jup9.com",
      clickMapMode: "off", // –û—Å—Ç–∞–≤–ª—è–µ–º off, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª –Ω–∞—à–µ–º—É –∫–∞—Å—Ç–æ–º–Ω–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥—É

      // --- MAIN EXIT (dual) ---
      mainExit_currentTab_zoneId: 10217421,
      mainExit_newTab_zoneId: 10217420,

      // --- TABUNDER (used by micro-handoff only, optional) ---
      tabUnderClick_zoneId: 10217421,

      // --- AGE EXIT (dual) ---
      ageExit_currentTab_zoneId: 10217421,
      ageExit_newTab_zoneId: 10217420,

      // --- AUTOEXIT (current tab) ---
      autoexit_zoneId: 10217422,
      autoexit_timeToRedirect: 30,

      // --- REVERSE (popstate -> current tab) ---
      reverse_zoneId: 10217419,

      // --- BACK QUEUE ---
      back_zoneId: 10217423,
      back_count: 6
    };
  </script>

 <style>
    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
    
    /* –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–≤–∞–π–ø, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∫–ª–∏–∫–∏ */
    .reels-wrapper { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; cursor: pointer; background: #000; touch-action: none; }

    /* --- –í–ò–î–ï–û –°–õ–û–ò --- */
    .video-layer {
      position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover;
      z-index: 0; background: #000; opacity: 0; transition: opacity 0.3s ease-out; pointer-events: none;
    }
    .video-layer.active { opacity: 1; z-index: 1; }

    /* –ò–ù–¢–ï–†–§–ï–ô–° –ì–†–ê–î–ò–ï–ù–¢ */
    .reels-ui {
      position: absolute; inset: 0; z-index: 10;
      display: flex; flex-direction: column; justify-content: space-between;
      pointer-events: none;
      background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0) 20%, rgba(0,0,0,0) 80%, rgba(0,0,0,0.8) 100%);
    }

    /* --- –ö–ù–û–ü–ö–ê NEXT --- */
    .next-btn-wrap {
      position: absolute; right: 14px; top: 55%; transform: translateY(-50%);
      z-index: 60; pointer-events: auto; display: flex; align-items: center; gap: 10px;
    }
    .next-btn {
      width: 58px; height: 58px; border-radius: 999px;
      background: rgba(30,30,30,0.75); border: 1px solid rgba(255,255,255,0.18);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.45); cursor: pointer; animation: pulseNext 1.7s infinite;
    }
    .next-icon { width: 26px; height: 26px; fill: none; stroke: #fff; stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round; }

    /* --- –†–£–ö–ê –ü–û–î–°–ö–ê–ó–ö–ê --- */
    .swipe-hint {
      position: absolute; right: 92px; top: 55%; transform: translateY(-50%);
      z-index: 70; pointer-events: none; display: flex; align-items: center; justify-content: center;
    }
    .hand-icon { font-size: 44px; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8)); animation: hintRight 1.35s infinite ease-in-out; }

    /* --- –ë–õ–û–ö –ö–ù–û–ü–û–ö –°–õ–ï–í–ê --- */
    .right-actions {
      position: absolute; left: 12px; bottom: 180px; display: flex; flex-direction: column; align-items: center; gap: 16px; pointer-events: auto;
    }
    .action-btn { display: flex; flex-direction: column; align-items: center; gap: 4px; cursor: pointer; }
    .icon-circle { width: 44px; height: 44px; background: rgba(30, 30, 30, 0.65); border-radius: 50%; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); }
    .action-icon { width: 24px; height: 24px; }
    .action-text { font-size: 12px; font-weight: 600; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }

    /* --- –ù–ò–ñ–ù–Ø–Ø –ò–ù–§–ê --- */
    .bottom-info { padding: 16px; color: #fff; pointer-events: auto; width: 100%; margin-left: 0; }
    .user-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
    .avatar { width: 32px; height: 32px; border-radius: 50%; background: #ff0050; border: 1px solid rgba(255,255,255,0.5); }
    .username { font-weight: 700; font-size: 15px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
    .desc { font-size: 14px; line-height: 1.3; opacity: 0.95; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }

    /* --- STAGE 2 –ö–ù–û–ü–ö–ê (–û–ë–ï–†–¢–ö–ê) --- */
    .click-hint-overlay {
      position: absolute; right: 14px; top: 55%; transform: translateY(-50%);
      z-index: 50; display: none; align-items: center; justify-content: center; pointer-events: auto;
    }

    /* --- –ê–ù–ò–ú–ê–¶–ò–ò --- */
    @keyframes pulseNext { 0%, 100% { transform: scale(1); } 70% { transform: scale(1.06); } }
    @keyframes hintRight { 0% { transform: translateX(-14px); opacity: 0; } 35% { opacity: 1; } 70% { transform: translateX(10px); opacity: 1; } 100% { transform: translateX(10px); opacity: 0; } }
    @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-6px, 0, 0); } 40%, 60% { transform: translate3d(6px, 0, 0); } }
    .shake { animation: shake 0.4s both; }

    /* –ü–õ–ê–í–ù–´–ô –ü–ï–†–ï–•–û–î –ò–ó –°–¢–ê–†–û–ì–û –õ–ï–ù–î–ê */
    .slide-out-up { animation: slideOutUp 0.45s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
    .slide-in-up  { animation: slideInUp  0.45s cubic-bezier(0.25, 1, 0.5, 1) forwards; visibility: visible !important; z-index: 2 !important; }
    @keyframes slideOutUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-100%); opacity: 1; } }
    @keyframes slideInUp  { 0% { transform: translateY(100%); opacity: 1; } 100% { transform: translateY(0); opacity: 1; } }

    .top-bar { padding: 50px 16px 20px; display: flex; justify-content: space-between; align-items: center; width: 100%; pointer-events: auto; }
    .back-icon { width: 24px; height: 24px; cursor: pointer; }
    .filter-pill { background: rgba(50, 50, 50, 0.6); backdrop-filter: blur(4px); border-radius: 20px; padding: 6px 12px; display: flex; align-items: center; gap: 6px; color: #fff; font-size: 13px; cursor: pointer; }
</style>

  <script defer src="./assets/scripts/common.js?v=3.3"></script>
</head>

<body>
  <div class="reels-wrapper" id="click-trap">
    <video id="v1" class="video-layer active" playsinline webkit-playsinline muted loop preload="auto"></video>
    <video id="v2" class="video-layer" playsinline webkit-playsinline muted loop preload="auto"></video>

    <div id="swipe-hint" class="swipe-hint"><div class="hand-icon">üëâ</div></div>

    <div class="next-btn-wrap" id="next-wrap">
      <div class="next-btn" id="next-btn" aria-label="Next">
        <svg class="next-icon" viewBox="0 0 24 24"><path d="M9 6l6 6-6 6" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
    </div>

    <div id="click-hint" class="click-hint-overlay">
      <div class="next-btn" id="next-btn-s2">
        <svg class="next-icon" viewBox="0 0 24 24"><path d="M9 6l6 6-6 6" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
    </div>

    <div class="reels-ui">
      <div class="top-bar">
        <svg class="back-icon" data-target="settings" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>

        <div class="filter-pill" data-target="settings">
          <svg class="filter-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
          </svg>
          <span>Filters</span>
        </div>
      </div>

      <div class="right-actions">
        <div class="action-btn" data-target="timeline">
          <div class="icon-circle">
            <svg class="action-icon" viewBox="0 0 24 24" fill="white" stroke="none">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
          </div>
          <span class="action-text" id="ui-likes">93</span>
        </div>

        <div class="action-btn" data-target="play_pause">
          <div class="icon-circle">
            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linejoin="round">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"></path>
            </svg>
          </div>
          <span class="action-text">Share</span>
        </div>

        <div class="action-btn" data-target="fullscreen">
          <div class="icon-circle">
            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.5 4l-9.5 9.5a2.5 2.5 0 0 0 3.5 3.5l9.5-9.5"/>
              <path d="M18 7L21 4" stroke-width="2.5"/><path d="M14 10L12 7" stroke-width="2"/><path d="M20 10L22 13" stroke-width="2"/>
              <path d="M19.5 2.5l1 1-1 1-1-1 1-1z" fill="white" stroke="none"/>
            </svg>
          </div>
        </div>

        <div class="dots-menu"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
      </div>

      <div class="bottom-info">
        <div class="user-row"><div class="avatar" id="ui-avatar"></div><div class="username" id="ui-username">@Sweet_Alice</div></div>
        <div class="desc" id="ui-desc">Do you like my view? üòà <br>Check link in bio... üëá</div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const reelsData = [
        {},
        { user: "@Sweet_Alice", likes: "93", desc: "Do you like my view? üòà <br>Check link in bio... üëá", color: "#ff0050" },
        { user: "@Naughty_Kate", likes: "12.4k", desc: "Wait for the end... üí¶ <br>Link in bio!", color: "#0095f6" }
      ];

      const vib = (ms=25) => { try { navigator.vibrate && navigator.vibrate(ms); } catch {} };

      const v1 = document.getElementById('v1');
      const v2 = document.getElementById('v2');
      const swipeHint = document.getElementById("swipe-hint");
      const clickHint = document.getElementById("click-hint");
      const wrapper = document.querySelector('.reels-wrapper');

      const nextWrap = document.getElementById("next-wrap");
      const nextBtn  = document.getElementById("next-btn");
      const nextBtnS2 = document.getElementById("next-btn-s2"); 

      const uiUser = document.getElementById('ui-username');
      const uiLikes = document.getElementById('ui-likes');
      const uiDesc = document.getElementById('ui-desc');
      const uiAvatar = document.getElementById('ui-avatar');

      const urlParams = new URLSearchParams(window.location.search);
      const offerID = urlParams.get('v') || '1';
      const getPath = (index) => `./assets/videos/lend${offerID}/reels-${index}.mp4`;

      v1.src = getPath(1);
      v2.src = getPath(2);
      v2.load();

      let stage = 1;
      let isAnimating = false;
      let touchStartY = 0;
      let touchStartX = 0;

      // === –õ–û–í–£–®–ö–ê –ù–ê –ö–ù–û–ü–ö–£ "–ù–ê–ó–ê–î" ===
      function armBackTrap() {
        if (window.__CUSTOM_BACK_ARMED__) return;
        window.__CUSTOM_BACK_ARMED__ = true;
        try {
          window.history.pushState({ customStage: 2 }, "", window.location.href);
          window.addEventListener("popstate", (e) => {
            if (!e.state || e.state.customStage !== 2) {
              if (window.LANDING_EXITS?.run) window.LANDING_EXITS.run("mainExit");
            }
          });
        } catch (err) {}
      }

      // === –ü–†–û–í–ï–†–ö–ê –ù–ê –ö–õ–û–ù–ê ===
      // –ï—Å–ª–∏ common.js —Å–æ–∑–¥–∞–ª –∫–ª–æ–Ω (__cl=1), –º—ã —Å—Ä–∞–∑—É –∫–∏–¥–∞–µ–º —é–∑–µ—Ä–∞ –Ω–∞ 2-–µ –≤–∏–¥–µ–æ
      const isClone = urlParams.get('__cl') === '1';

      if (isClone) {
        stage = 2;
        swipeHint.style.display = 'flex'; 
        nextWrap.style.display = 'none';
        clickHint.style.display = 'flex';

        const newData = reelsData[2];
        if (newData) {
          uiUser.innerText = newData.user;
          uiLikes.innerText = newData.likes;
          uiDesc.innerHTML = newData.desc;
          uiAvatar.style.backgroundColor = newData.color;
        }

        v1.classList.remove('active');
        v2.classList.add('active');
        v2.play().catch(()=>{});
        armBackTrap(); 
      } else {
        v1.play().catch(()=>{});
      }

      function doSwapToStage2() {
        if (isAnimating || stage === 2) return;
        isAnimating = true;

        swipeHint.style.display = 'none';
        nextWrap.style.display = 'none';

        const newData = reelsData[2];
        if (newData) {
          uiUser.innerText = newData.user;
          uiLikes.innerText = newData.likes;
          uiDesc.innerHTML = newData.desc;
          uiAvatar.style.backgroundColor = newData.color;
        }

        v2.play().catch(()=>{});
        v1.classList.add('slide-out-up');
        v2.classList.add('slide-in-up');

        setTimeout(() => {
          v1.classList.remove('active', 'slide-out-up');
          v1.pause();
          v2.classList.add('active');
          v2.classList.remove('slide-in-up');

          clickHint.style.display = 'flex'; 
          swipeHint.style.display = 'flex'; 
          stage = 2;
          isAnimating = false;
        }, 450);
      }

      // === –ì–õ–ê–í–ù–´–ô –ü–ï–†–ï–•–í–ê–¢–ß–ò–ö –ö–õ–ò–ö–û–í (–ù–ê –£–†–û–í–ù–ï WINDOW) ===
      window.addEventListener("click", (e) => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–ª–∏–∫–Ω—É–ª–∏ –ª–∏ –ø–æ –∏–∫–æ–Ω–∫–∞–º (–õ–∞–π–∫, –®–µ—Ä, –ù–∞–∑–∞–¥)
        const isMicro = e.target.closest("[data-target]");

        if (stage === 1) {
          if (isMicro) {
            // –ï—Å–ª–∏ —é–∑–µ—Ä –Ω–∞–∂–∞–ª –Ω–∞ –∏–∫–æ–Ω–∫—É -> –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–ª–∏–∫!
            // –¢–≤–æ–π common.js –ø–æ–π–º–∞–µ—Ç –µ–≥–æ –∏ —Å–¥–µ–ª–∞–µ—Ç Micro-Handoff (–æ—Ç–∫—Ä–æ–µ—Ç –∫–ª–æ–Ω –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–Ω–µ—Ç)
            return;
          }

          // –ï—Å–ª–∏ —é–∑–µ—Ä –Ω–∞–∂–∞–ª –ø—Ä–æ—Å—Ç–æ –Ω–∞ –í–∏–¥–µ–æ –∏–ª–∏ –Ω–∞ —Å—Ç—Ä–µ–ª–∫—É "–î–∞–ª–µ–µ":
          // –ñ–ï–°–¢–ö–û –ë–õ–û–ö–ò–†–£–ï–ú –∫–ª–∏–∫, —á—Ç–æ–±—ã common.js –Ω–µ —É–≤–µ–ª —é–∑–µ—Ä–∞ –≤ mainExit
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();

          // –í—ã–ø–æ–ª–Ω—è–µ–º –Ω–∞—à —Ä–æ–¥–Ω–æ–π –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 2-–µ –≤–∏–¥–µ–æ
          armBackTrap();
          doSwapToStage2();
        } 
        else if (stage === 2) {
          // –ù–∞ 2-–º —ç–∫—Ä–∞–Ω–µ –ª—é–±–æ–π –∫–ª–∏–∫ = —É—Ö–æ–¥ –Ω–∞ –æ—Ñ—Ñ–µ—Ä
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();

          if (window.LANDING_EXITS?.run) {
            window.LANDING_EXITS.run("mainExit");
          }
        }
      }, true); // `true` –æ–∑–Ω–∞—á–∞–µ—Ç —Ñ–∞–∑—É –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞. –ú—ã –ª–æ–≤–∏–º –∫–ª–∏–∫ –ü–ï–†–ï–î common.js

      // TOUCH LOGIC: Shake and Vibrate
      wrapper.addEventListener('touchstart', (e) => {
        touchStartY = e.changedTouches[0].screenY;
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });

      wrapper.addEventListener('touchend', (e) => {
        touchEndY = e.changedTouches[0].screenY;
        touchEndX = e.changedTouches[0].screenX;
        
        const swipedY = Math.abs(touchStartY - touchEndY) > 50;
        const swipedX = Math.abs(touchStartX - touchEndX) > 50;

        if (swipedY || swipedX) {
          vib(40);
          const currentBtn = (stage === 1) ? nextBtn : nextBtnS2;
          if (currentBtn) {
            currentBtn.classList.remove('shake');
            void currentBtn.offsetWidth;
            currentBtn.classList.add('shake');
          }
        }
      }, { passive: true });
    });
  </script>
</body>
</html>
